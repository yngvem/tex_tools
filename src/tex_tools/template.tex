\documentclass[12pt, a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{color}
\usepackage{xcolor}
\usepackage{inconsolata}

\setlength{\parindent}{0em}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{lightgrey}{rgb}{0.99,0.99,0.99}

\definecolor{lightergrey}{RGB}{250,250,250}
\definecolor{mediumgrey}{RGB}{185,185,185}
\definecolor{mygreenblue}{RGB}{77,160,187}
\definecolor{mylightblue}{RGB}{74,181,229}
\definecolor{myyellow}{RGB}{206,170,75}
\definecolor{myred}{RGB}{229,105,108}

\definecolor{halfgray}{gray}{0.55}
\definecolor{ipython_frame}{rgb}{0.99,0.99,0.99}
\definecolor{coolgrey}{RGB}{48, 64, 68}

\newcommand\digitstyle{\color{mygreen}}
\makeatletter
\newcommand{\ProcessDigit}[1]
{%
  \ifnum\lst@mode=\lst@Pmode\relax%
   {\digitstyle #1}%
  \else
    #1%
  \fi
}
\makeatother

\lstdefinestyle{python}{language=python,
    backgroundcolor=\color{lightergrey},   % choose the background color
    basicstyle=\color{coolgrey}\ttfamily,        % size of fonts used for the code
    breaklines=true,                 % automatic line breaking only at whitespace
    captionpos=b,                    % sets the caption-position to bottom
    commentstyle=\color{myyellow},    % comment style
    escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
    keywordstyle=\color{myred},       % keyword style
    stringstyle=\color{mygreenblue},     % string literal style
    rulecolor=\color{lightergrey},
    numbers=left,
    numberstyle=\scriptsize\color{halfgray}\ttfamily,
    xleftmargin={0cm},
    frame=single,
    framerule=0pt,
    %linewidth=1.2\textwidth,
    breaklines=true,
    literate=
    {æ}{{\ae}}1 
    {Æ}{{\AE}}1 
    {ø}{{\o}}1 
    {Ø}{{\O}}1 
    {å}{{\aa}}1 
    {Å}{{\AA}}1 
    {²}{{$^{\tt 2}$}}1 
    {³}{{$^{\tt 3}$}}1
    {0}{{{\ProcessDigit{0}}}}1
    {1}{{{\ProcessDigit{1}}}}1
    {2}{{{\ProcessDigit{2}}}}1
    {3}{{{\ProcessDigit{3}}}}1
    {4}{{{\ProcessDigit{4}}}}1
    {5}{{{\ProcessDigit{5}}}}1
    {6}{{{\ProcessDigit{6}}}}1
    {7}{{{\ProcessDigit{7}}}}1
    {8}{{{\ProcessDigit{8}}}}1
    {9}{{{\ProcessDigit{9}}}}1
    {<=}{{\(\leq\)}}1,
    morestring=[b]',
    morestring=[b]',
    morecomment=[l]//,
    otherkeywords={self, {*}, {=}, {+}, {-}},
    showspaces=false,
    showstringspaces=false,
}

\lstnewenvironment{python}
{
\lstset{style=python}
}
{
}

\begin{document}

\BLOCK{ for name, script in content.items() }

\section{\VAR{name}}
\begin{python}
\VAR{script}
\end{python}
\clearpage

\BLOCK{ endfor }
\end{document}
